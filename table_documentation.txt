tables:
  - table_name: "fact_order_line"
    table_comment: "The 'fact_order_line' table provides a consolidated view of order information across multiple Operators. The level of granularity is at the order line level. Information includes the customer, shop, and product, as well as key lifecycle events for each order line, such as creation, acceptance, shipping and closure. The table also includes financial information like product, shipping, commissions, taxes, and promotion amounts. It can be joined to multiple dimensions to allow for further segmentation and analysis."
    column:
      - column_name: "operator_id"
        column_comment: "Unique identifier for the Operator."
      - column_name: "customer_id"
        column_comment: "Identifier for the customer placing the order. This is operator-specific."
      - column_name: "order_id"
        column_comment: "Identifier for the logistic order, which can contain multiple order lines. Logistic orders are always specific to one shop."
      - column_name: "order_line_id"
        column_comment: "Identifier for the order line. An order line represents an offer and its quantity in the customer's shopping cart. A logistic order can include one or more order lines. There is a one-to-one relationship with order_line_uuid. This identifier is operator-specific."
      - column_name: "shop_id"
        column_comment: "Identifier for the shop fulfilling the logistic order. There is a one-to-one relationship with shop_uuid. This identifier is operator-specific."
      - column_name: "order_created_datetime"
        column_comment: "Timestamp indicating when the order was created, in the operator's local time."
      - column_name: "order_accepted_datetime"
        column_comment: "Timestamp indicating when the order was accepted, in the operator's local time."
      - column_name: "order_debited_datetime"
        column_comment: "Timestamp indicating when the logistic order was first debited, in the operator's local time."
      - column_name: "order_line_debited_datetime"
        column_comment: "Timestamp indicating when the order line was debited, in the operator's local time. Order lines belonging to the same logistic order can be debited individually at different times."
      - column_name: "order_shipping_datetime"
        column_comment: "Timestamp indicating when the order started shipping, in the operator's local time."
      - column_name: "shipping_deadline_datetime"
        column_comment: "Timestamp indicating the shipping deadline for the order, in the operator's local time."
      - column_name: "order_shipped_datetime"
        column_comment: "Timestamp indicating when the order was shipped, in the operator's local time."
      - column_name: "order_closed_datetime"
        column_comment: "Timestamp indicating when the order was closed, in the operator's local time."
      - column_name: "product_amount"
        column_comment: "The product amount for the order line. This can include tax if the operator doesn't separate it."
      - column_name: "product_amount_tax"
        column_comment: "The tax amount for the product on the order line, if applicable, and if the operator separates it from the product_amount."
      - column_name: "shipping_amount"
        column_comment: "The shipping amount for the order line. This can include tax if the operator doesn't separate it."
      - column_name: "shipping_amount_tax"
        column_comment: "The tax amount for the shipping on the order line, if applicable, and if the operator separates it from the shipping_amount."
      - column_name: "currency_code"
        column_comment: "ISO 4217 currency code of the logistic order. This is the same currency as defined for the shop."
      - column_name: "customer_commercial_id_sequence"
        column_comment: "The sequence number of purchases for a customer_id by commercial_id, starting at 1. This can be 0 if all order lines in the commercial_id have been cancelled or refused."
      - column_name: "order_product_count"
        column_comment: "Total number of unique product_sku in a logistic order, where the order line is not cancelled or refused."
      - column_name: "is_discounted"
        column_comment: "Boolean indicating whether the order line has a discount applied."
      - column_name: "operator_commission_amount"
        column_comment: "The amount of commission charged by the operator for the order line."
      - column_name: "operator_commission_amount_tax"
        column_comment: "Tax amount applied to the operator's commission amount."
      - column_name: "count_promotion"
        column_comment: "The total number of promotions applied to the order line."
      - column_name: "promotion_total_amount"
        column_comment: "Total amount of all promotions applied to the order line."
      - column_name: "order_line_state"
        column_comment: "The current status of the order line. Values are dependent on the order_workflow."
      - column_name: "order_line_reason"
        column_comment: "Reason for the current status of the order line, if available."
      - column_name: "category_code"
        column_comment: "Code representing the category to which the product_sku belongs. This code is operator-specific."
      - column_name: "product_sku"
        column_comment: "The operator's unique Stock Keeping Unit (SKU) identifier for a product."
      - column_name: "shop_sku"
        column_comment: "Stock Keeping Unit (SKU) assigned by the shop. There can be multiple shop_sku for the same product_sku. This is operator-specific."
      - column_name: "product_quantity"
        column_comment: "The number of products in the order line."

  - table_name: "fact_shop"
    table_comment: "The 'fact_shop' table provides aggregated performance metrics for shops, including financial, order, refund, incident, and evaluation details. It is used for detailed analysis of shop-level activity and performance."
    column:
      - column_name: "operator_id"
        column_comment: "Unique identifier for the Operator."
      - column_name: "stats_date"
        column_comment: "The date for which the statistics are aggregated."
      - column_name: "currency_code"
        column_comment: "ISO 4217 code representing the currency for financial metrics. This can be used to join to the 'dim_currency' table."
      - column_name: "shop_id"
        column_comment: "Internal identifier for the Shop, specific to the Operator."
      - column_name: "product_amount"
        column_comment: "Total amount from product sales for the Shop, excluding taxes."
      - column_name: "product_amount_tax"
        column_comment: "Tax amount on the product sales."
      - column_name: "shipping_amount"
        column_comment: "Total shipping revenue for the Shop."
      - column_name: "shipping_amount_tax"
        column_comment: "Tax amount on the shipping revenue."
      - column_name: "operator_commission_amount"
        column_comment: "Total operator commission revenue for the Shop."
      - column_name: "operator_commission_amount_tax"
        column_comment: "Tax on operator commission revenue."
      - column_name: "promotion_total_amount"
        column_comment: "Total promotional discounts applied to the Shop's orders."
      - column_name: "count_promotion"
        column_comment: "Count of promotions applied to the Shop's orders."
      - column_name: "count_commercial_order"
        column_comment: "Total number of commercial orders placed at the Shop."
      - column_name: "count_logistic_order"
        column_comment: "Total number of logistic orders placed at the Shop."
      - column_name: "count_order_line"
        column_comment: "Total number of order lines associated with the Shop."
      - column_name: "product_quantity"
        column_comment: "Total quantity of products sold by the Shop."
      - column_name: "refused_product_amount"
        column_comment: "Total amount for refused products at the Shop."
      - column_name: "refused_product_amount_tax"
        column_comment: "Tax amount on refused product amounts."
      - column_name: "refused_shipping_amount"
        column_comment: "Total shipping amount for refused orders at the Shop."
      - column_name: "refused_shipping_amount_tax"
        column_comment: "Tax amount on refused shipping amounts."
      - column_name: "refused_operator_commission_amount"
        column_comment: "Operator commission for refused orders at the Shop."
      - column_name: "refused_operator_commission_amount_tax"
        column_comment: "Tax on operator commission for refused orders."
      - column_name: "cancelation_product_amount"
        column_comment: "Total product amount for canceled orders at the Shop."
      - column_name: "cancelation_product_amount_tax"
        column_comment: "Tax on product amounts for canceled orders."
      - column_name: "cancelation_shipping_amount"
        column_comment: "Total shipping amount for canceled orders at the Shop."
      - column_name: "cancelation_shipping_amount_tax"
        column_comment: "Tax on shipping amounts for canceled orders."
      - column_name: "cancelation_operator_commission_amount"
        column_comment: "Operator commission for canceled orders at the Shop."
      - column_name: "cancelation_operator_commission_amount_tax"
        column_comment: "Tax on operator commissions for canceled orders."
      - column_name: "refund_product_amount"
        column_comment: "Total product refund amount for the Shop."
      - column_name: "refund_product_amount_tax"
        column_comment: "Tax on refunded product amounts."
      - column_name: "refund_shipping_amount"
        column_comment: "Total shipping refund amount for the Shop."
      - column_name: "refund_shipping_amount_tax"
        column_comment: "Tax on refunded shipping amounts."
      - column_name: "refund_operator_commission_amount"
        column_comment: "Operator commission refunded for the Shop."
      - column_name: "refund_operator_commission_amount_tax"
        column_comment: "Tax on refunded operator commissions."
      - column_name: "count_commercial_order_with_refund"
        column_comment: "Count of commercial orders with at least one refund at the Shop."
      - column_name: "count_logistic_order_with_refund"
        column_comment: "Count of logistic orders with at least one refund at the Shop."
      - column_name: "count_order_line_with_refund"
        column_comment: "Count of order lines with at least one refund at the Shop."
      - column_name: "count_refund"
        column_comment: "Total number of refunds issued by the Shop."
      - column_name: "refund_product_quantity"
        column_comment: "Total quantity of refunded products at the Shop."
      - column_name: "count_commercial_order_with_incident"
        column_comment: "Count of commercial orders with at least one incident at the Shop."
      - column_name: "count_logistic_order_with_incident"
        column_comment: "Count of logistic orders with at least one incident at the Shop."
      - column_name: "count_order_line_with_incident"
        column_comment: "Count of order lines with at least one incident at the Shop."
      - column_name: "count_incident"
        column_comment: "Total number of incidents reported at the Shop."
      - column_name: "count_active_offer"
        column_comment: "Total number of active offers available at the Shop."
      - column_name: "subscription_amount"
        column_comment: "Total subscription amount charged for the Shop."
      - column_name: "subscription_amount_tax"
        column_comment: "Tax on subscription amounts for the Shop."
      - column_name: "sum_evaluation_grade"
        column_comment: "Sum of evaluation grades received by the Shop."
      - column_name: "count_evaluation"
        column_comment: "Total number of evaluations received by the Shop."
